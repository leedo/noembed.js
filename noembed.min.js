var noembed={patterns:[],callbacks:{},callback_counter:0,setup:function(a){if(!a){a="a[href]"}var b=document.querySelectorAll(a);if(b.length){noembed.get_patterns(function(){noembed.setup_links(b)})}},setup_links:function(a){var e=a.length,f=noembed.patterns.length;for(var c=0;c<e;c++){var d=a[c];if(d.nodeName!="A"){noembed.find_links(d)}else{for(var b=0;b<f;b++){if(noembed.patterns[b].test(d.href)){noembed.setup_embeddable(d);continue}}}}},setup_embeddable:function(b){var a=document.createElement("a");a.className="noembed-toggle";a.href=b.href;a.innerHTML="embed";b.parentNode.insertBefore(a,b.nextSibling);a.addEventListener("click",noembed.toggle_embed)},toggle_embed:function(d){d.preventDefault();var c=this,a=c.href;if(c["embed-content"]){if(c["embed-node"]){var b=c["embed-node"];b.parentNode.removeChild(b);delete c["embed-node"]}else{noembed.insert_content(c,c["embed-content"])}return}noembed.json_request("//noembed.com/embed?url="+escape(a),function(e){if(!e||!e.html){c.parentNode.removeChild(c);return}noembed.insert_content(c,e.html)})},insert_content:function(d,c){var e=document.createElement("DIV");e.className="noembed-embed";e.innerHTML=c;d["embed-node"]=e;d["embed-content"]=c;var b=d;while(!b.nodeName.match(/^(br|p|div)$/i)){b=b.nextSibling;if(!b){break}}if(b){b.parentNode.insertBefore(e,b);return}var a=d;while(!a.nodeName.match(/^(p|div|td|li)$/i)){a=a.parentNode;if(!a){break}}if(a){a.appendChild(e);return}d.parentNode.appendChild(e)},get_patterns:function(a){noembed.patterns=[];noembed.json_request("//noembed.com/providers",function(f){var e=f.length;for(var c=0;c<e;c++){var d=f[c]["patterns"];var g=d.length;for(var b=0;b<g;b++){noembed.patterns.push(new RegExp(d[b]))}}a()})},json_request:function(a,c){if(navigator.userAgent.match(/Explorer/)){noembed.jsonp_request(a,c)}else{var b=new XMLHttpRequest();b.open("GET",a,true);b.onreadystatechange=function(f){if(b.readyState==4){var d;if(b.status==200){try{d=JSON.parse(b.responseText)}catch(f){}}c(d)}};b.send()}},new_callback_name:function(){return +noembed.callback_counter},add_jsonp_callback:function(b){var a="noembed_callback_"+noembed.callback_counter++;window[a]=function(c){delete window[a];b(c)};return a},jsonp_request:function(c,d){var a=noembed.add_jsonp_callback(d);var b=document.createElement("SCRIPT");if(c.match(/\?.+/)){c+="&callback="+a}else{c+="?callback="+a}b.src=c;document.body.appendChild(b)}};
/*!
 * DOMReady
 *
 * Cross browser object to attach functions that will be called
 * immediatly when the DOM is ready.
 *
 * @version   1.0
 * @author    Victor Villaverde Laan
 * @link      http://www.freelancephp.net/domready-javascript-object-cross-browser/
 * @license   MIT license
 */
var DOMReady=(function(){var fns=[],isReady=false,errorHandler=null,getFunc=function(fn){if(typeof fn=="string"){return function(){eval(fn)}}return fn},ready=function(){isReady=true;for(var x=0;x<fns.length;x++){try{fns[x]()}catch(err){if(errorHandler){errorHandler(err)}}}};this.setOnError=function(fn){errorHandler=getFunc(fn);return this};this.add=function(fn){fn=getFunc(fn);if(isReady){fn()}else{fns[fns.length]=fn}return this};if(window.addEventListener){document.addEventListener("DOMContentLoaded",function(){ready()},false)}else{(function(){if(!document.uniqueID&&document.expando){return}var tempNode=document.createElement("document:ready");try{tempNode.doScroll("left");ready()}catch(err){setTimeout(arguments.callee,0)}})()}return this})();var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());DOMReady.add(noembed.setup);